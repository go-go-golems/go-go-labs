<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype 2: Availability Grid</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: 60px repeat(5, 1fr);
            /* Header + 5 days */
            gap: 1px;
            background-color: #ddd;
            border: 1px solid #ccc;
            margin-bottom: 20px;
        }

        .grid-header,
        .time-label,
        .day-slot {
            background-color: #f8f9fa;
            padding: 8px;
            text-align: center;
            font-size: 0.9em;
        }

        .grid-header {
            font-weight: bold;
        }

        .time-label {
            background-color: #e9ecef;
            text-align: right;
            font-size: 0.8em;
        }

        .day-slot {
            background-color: #fff;
            min-height: 35px;
            /* Slightly taller for easier clicking */
            border: 1px solid #eee;
            cursor: pointer;
            position: relative;
            /* For overlap indicators */
            transition: background-color 0.2s ease;
        }

        .day-slot.selected {
            background-color: #90ee90;
        }

        /* Light green for selection */
        .day-slot.overlap-high {
            background-color: #28a745;
        }

        /* Darker green for high overlap */
        .day-slot.overlap-medium {
            background-color: #a3e9a4;
        }

        .day-slot.overlap-low {
            background-color: #e2f0e8;
        }

        /* Example overlap indicators (replace with actual logic) */
        .overlap-indicator {
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 0.7em;
            padding: 1px 3px;
            border-radius: 3px;
            color: white;
        }

        .overlap-high .overlap-indicator {
            background-color: #19692c;
        }

        .overlap-medium .overlap-indicator {
            background-color: #5f9961;
            color: #333;
        }

        .overlap-low .overlap-indicator {
            background-color: #ccc;
            color: #555;
        }

        .summary-section {
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="mb-4">Meeting Scheduler: Select Available Slots</h1>
        <p>Click on the 1-hour slots when you are <strong>available</strong> to meet next week (April 15th - 19th). The
            grid shows the overlap based on everyone's selections.</p>

        <div class="calendar-grid" id="calendar-grid">
            <!-- Header Row -->
            <div class="grid-header">Time</div>
            <div class="grid-header">Mon, Apr 15</div>
            <div class="grid-header">Tue, Apr 16</div>
            <div class="grid-header">Wed, Apr 17</div>
            <div class="grid-header">Thu, Apr 18</div>
            <div class="grid-header">Fri, Apr 19</div>

            <!-- Grid Cells: Generated by JS -->
            <script>
                const grid = document.getElementById('calendar-grid');
                const days = 5;
                const startHour = 9; // 9 AM
                const endHour = 17; // 5 PM

                // Hypothetical overlap data (e.g., number of people available)
                const overlapData = {
                    '1-10': 5, '1-11': 3,
                    '2-14': 4, '2-15': 4,
                    '3-10': 2, '3-11': 1,
                    '0-9': 3
                };

                for (let hour = startHour; hour < endHour; hour++) {
                    // Time Label
                    const timeLabel = document.createElement('div');
                    timeLabel.classList.add('time-label');
                    timeLabel.textContent = `${hour % 12 === 0 ? 12 : hour % 12}:00 ${hour < 12 ? 'AM' : 'PM'}`;
                    grid.appendChild(timeLabel);

                    // Day Slots for this hour
                    for (let day = 0; day < days; day++) {
                        const slot = document.createElement('div');
                        slot.classList.add('day-slot');
                        slot.dataset.hour = hour;
                        slot.dataset.day = day;
                        slot.setAttribute('title', `Day ${day}, Hour ${hour} - Click to mark available`);

                        const overlapKey = `${day}-${hour}`;
                        const overlapCount = overlapData[overlapKey] || 0;
                        let overlapClass = '';
                        if (overlapCount >= 4) { overlapClass = 'overlap-high'; }
                        else if (overlapCount >= 2) { overlapClass = 'overlap-medium'; }
                        else if (overlapCount > 0) { overlapClass = 'overlap-low'; }

                        if (overlapClass) {
                            slot.classList.add(overlapClass);
                            const indicator = document.createElement('span');
                            indicator.classList.add('overlap-indicator');
                            indicator.textContent = `${overlapCount}`;
                            slot.appendChild(indicator);
                            slot.setAttribute('title', `Day ${day}, Hour ${hour} - ${overlapCount} available`);
                        }

                        grid.appendChild(slot);
                    }
                }
            </script>
        </div>

        <button class="btn btn-primary" id="submit-availability">Submit My Availability</button>

        <div class="summary-section">
            <h4>Best Overlapping Slots (Example)</h4>
            <ul class="list-group">
                <li class="list-group-item list-group-item-success">Tuesday, 10:00 AM - 11:00 AM <span
                        class="badge bg-primary rounded-pill">5/5 People Available</span></li>
                <li class="list-group-item list-group-item-success">Wednesday, 2:00 PM - 4:00 PM <span
                        class="badge bg-primary rounded-pill">4/5 People Available</span></li>
                <li class="list-group-item">Monday, 9:00 AM - 10:00 AM <span class="badge bg-primary rounded-pill">3/5
                        People Available</span></li>
            </ul>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const gridContainer = document.getElementById('calendar-grid');

        gridContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('day-slot') || e.target.closest('.day-slot')) {
                const slot = e.target.closest('.day-slot');
                // Simple toggle - in real app, would check against overlap classes maybe
                slot.classList.toggle('selected');
                const hour = slot.dataset.hour;
                const day = slot.dataset.day;
                const isSelected = slot.classList.contains('selected');
                console.log(`Slot Day ${day}, Hour ${hour} ${isSelected ? 'selected' : 'deselected'}`);
            }
        });

        document.getElementById('submit-availability').addEventListener('click', () => {
            const selectedSlots = [];
            gridContainer.querySelectorAll('.day-slot.selected').forEach(slot => {
                selectedSlots.push({ day: slot.dataset.day, hour: slot.dataset.hour });
            });
            console.log("Submitted Availability:", selectedSlots);
            alert('Availability submitted (prototype only). See console for data.');
            // In a real app, this would send data to the server
        });
    </script>
</body>

</html>