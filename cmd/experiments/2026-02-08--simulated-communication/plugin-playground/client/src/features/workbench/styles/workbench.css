/*
 * Plugin Workbench â€” base layout + theme tokens
 *
 * Styling strategy (react-modular-themable-storybook):
 *   - data-widget="workbench" scopes all rules
 *   - data-part="..." marks stable public styling hooks
 *   - data-state="..." carries variant/collapse state
 *   - CSS variables provide the theme surface; consumers override at root
 *   - Selectors use :where() for low specificity
 *
 * Visual language: matches vm-system-ui (slate palette, Inter/JetBrains Mono,
 * blue accent, compact text sizes, soft borders, subtle hovers).
 */

/* ------------------------------------------------------------------ */
/* Theme tokens                                                        */
/* ------------------------------------------------------------------ */

:where([data-widget="workbench"]) {
  /* Surface colors */
  --wb-color-bg: var(--background, oklch(0.141 0.005 285.823));
  --wb-color-surface: var(--card, oklch(0.21 0.006 285.885));
  --wb-color-surface-hover: oklch(0.25 0.006 286);
  --wb-color-surface-active: oklch(0.28 0.006 286);

  /* Text colors */
  --wb-color-text: var(--foreground, oklch(0.85 0.005 65));
  --wb-color-text-muted: var(--muted-foreground, oklch(0.55 0.015 286));
  --wb-color-text-heading: oklch(0.92 0.005 65);

  /* Border */
  --wb-color-border: var(--border, oklch(1 0 0 / 10%));

  /* Accent (blue family, matching vm-system-ui) */
  --wb-color-accent: oklch(0.62 0.21 260);
  --wb-color-accent-muted: oklch(0.62 0.21 260 / 20%);
  --wb-color-accent-text: oklch(0.75 0.14 260);

  /* Semantic */
  --wb-color-success: oklch(0.72 0.19 155);
  --wb-color-error: oklch(0.65 0.24 25);
  --wb-color-warning: oklch(0.75 0.18 75);

  /* Typography */
  --wb-font-sans: "Inter", system-ui, sans-serif;
  --wb-font-mono: "JetBrains Mono", ui-monospace, monospace;
  --wb-font-size-xs: 0.75rem;
  --wb-font-size-sm: 0.8125rem;
  --wb-font-size-base: 0.875rem;

  /* Spacing */
  --wb-space-1: 0.25rem;
  --wb-space-2: 0.5rem;
  --wb-space-3: 0.75rem;
  --wb-space-4: 1rem;

  /* Layout */
  --wb-sidebar-width: 15rem;
  --wb-sidebar-collapsed-width: 3rem;
  --wb-devtools-height: 17.5rem;
  --wb-devtools-collapsed-height: 2.25rem;
  --wb-radius: 0.375rem;

  /* base setup */
  font-family: var(--wb-font-sans);
  color: var(--wb-color-text);
  background: var(--wb-color-bg);
}

/* ------------------------------------------------------------------ */
/* Layout structure                                                    */
/* ------------------------------------------------------------------ */

:where([data-widget="workbench"]) {
  display: flex;
  flex-direction: column;
  height: 100dvh;
  overflow: hidden;
}

:where([data-widget="workbench"]) [data-part="toolbar"] {
  flex-shrink: 0;
  border-bottom: 1px solid var(--wb-color-border);
  background: var(--wb-color-surface);
}

:where([data-widget="workbench"]) [data-part="body"] {
  display: flex;
  flex: 1 1 0%;
  min-height: 0;
}

:where([data-widget="workbench"]) [data-part="sidebar"] {
  flex-shrink: 0;
  width: var(--wb-sidebar-width);
  border-right: 1px solid var(--wb-color-border);
  overflow-y: auto;
  overflow-x: hidden;
  background: var(--wb-color-surface);
  transition: width 150ms ease-out;
}

:where([data-widget="workbench"]) [data-part="sidebar"][data-state="collapsed"] {
  width: var(--wb-sidebar-collapsed-width);
}

:where([data-widget="workbench"]) [data-part="center"] {
  display: flex;
  flex-direction: column;
  flex: 1 1 0%;
  min-width: 0;
  min-height: 0;
}

:where([data-widget="workbench"]) [data-part="main"] {
  flex: 1 1 0%;
  min-height: 0;
  overflow: hidden;
}

:where([data-widget="workbench"]) [data-part="devtools"] {
  flex-shrink: 0;
  height: var(--wb-devtools-height);
  border-top: 1px solid var(--wb-color-border);
  overflow: hidden;
  transition: height 150ms ease-out;
}

:where([data-widget="workbench"]) [data-part="devtools"][data-state="collapsed"] {
  height: var(--wb-devtools-collapsed-height);
}
