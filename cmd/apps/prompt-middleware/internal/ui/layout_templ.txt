<!doctype html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>LLM Middleware Demo (Go + Templ)</title><!-- Basic Styling (can replace/extend with Tailwind/Bootstrap) --><style>\n\t\t\t\tbody {\n\t\t\t\t\tfont-family: sans-serif;\n\t\t\t\t\tline-height: 1.6;\n\t\t\t\t\tpadding: 20px;\n\t\t\t\t\tbackground-color: #f9fafb;\n\t\t\t\t\tcolor: #374151;\n\t\t\t\t}\n\t\t\t\t.container {\n\t\t\t\t\tmax-width: 1200px;\n\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t\tdisplay: grid;\n\t\t\t\t\tgrid-template-columns: 1fr 1fr;\n\t\t\t\t\tgap: 20px;\n\t\t\t\t}\n\t\t\t\t.panel {\n\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\tpadding: 20px;\n\t\t\t\t\tborder-radius: 8px;\n\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n\t\t\t\t}\n\t\t\t\th1, h2, h3 {\n\t\t\t\t\tcolor: #1f2937;\n\t\t\t\t}\n\t\t\t\tpre {\n\t\t\t\t\tbackground-color: #f3f4f6;\n\t\t\t\t\tpadding: 10px;\n\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\toverflow-x: auto;\n\t\t\t\t\twhite-space: pre-wrap; /* Allow wrapping */\n\t\t\t\t\tword-wrap: break-word; /* Break long words */\n\t\t\t\t}\n\t\t\t\ttextarea {\n\t\t\t\t\twidth: 95%; /* Adjust width */\n\t\t\t\t\tpadding: 8px;\n\t\t\t\t\tborder: 1px solid #d1d5db;\n\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t}\n\t\t\t\tbutton {\n\t\t\t\t\tbackground-color: #3b82f6;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tpadding: 8px 15px;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t\tbutton:hover {\n\t\t\t\t\tbackground-color: #2563eb;\n\t\t\t\t}\n\t\t\t\t.middleware-item {\n\t\t\t\t\tborder: 1px solid #e5e7eb;\n\t\t\t\t\tpadding: 15px;\n\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t}\n\t\t\t\t.middleware-header {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\talign-items: center;\n\t\t\t\t}\n\t\t\t\t.middleware-name {\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t\t.middleware-desc {\n\t\t\t\t\tfont-size: 0.9em;\n\t\t\t\t\tcolor: #6b7280;\n\t\t\t\t\tmargin-top: 5px;\n\t\t\t\t}\n\t\t\t\t/* Basic Switch styling */\n\t\t\t\t.switch {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\twidth: 40px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t}\n\t\t\t\t.switch input { \n\t\t\t\t\topacity: 0;\n\t\t\t\t\twidth: 0;\n\t\t\t\t\theight: 0;\n\t\t\t\t}\n\t\t\t\t.slider {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tbackground-color: #ccc;\n\t\t\t\t\ttransition: .4s;\n\t\t\t\t\tborder-radius: 20px;\n\t\t\t\t}\n\t\t\t\t.slider:before {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tcontent: \"\";\n\t\t\t\t\theight: 16px;\n\t\t\t\t\twidth: 16px;\n\t\t\t\t\tleft: 2px;\n\t\t\t\t\tbottom: 2px;\n\t\t\t\t\tbackground-color: white;\n\t\t\t\t\ttransition: .4s;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t}\n\t\t\t\tinput:checked + .slider {\n\t\t\t\t\tbackground-color: #2563eb;\n\t\t\t\t}\n\t\t\t\tinput:checked + .slider:before {\n\t\t\t\t\ttransform: translateX(20px);\n\t\t\t\t}\n\t\t\t\t.context-viewer {\n\t\t\t\t\tbackground-color: #f3f4f6;\n\t\t\t\t\tpadding: 10px;\n\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\tmax-height: 200px;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\tfont-size: 0.9em;\n\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t}\n\t\t\t\t.context-key {\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tcolor: #1d4ed8;\n\t\t\t\t}\n\t\t\t\t.htmx-indicator {\n\t\t\t\t\tdisplay: none; /* Hidden by default */\n\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\tcolor: #6b7280;\n\t\t\t\t\tfont-style: italic;\n\t\t\t\t}\n\t\t\t\t.htmx-request .htmx-indicator {\n\t\t\t\t\tdisplay: inline; /* Show during request */\n\t\t\t\t}\n\t\t\t\t.htmx-request.htmx-indicator {\n\t\t\t\t\tdisplay: inline; /* Show during request (alternative for self-indicating) */\n\t\t\t\t}\n\t\t\t</style><!-- HTMX --><script src=\"https://unpkg.com/htmx.org@2.0.4/dist/htmx.min.js\"></script></head><body><h1>LLM Middleware Demo (Go + Templ)</h1><div class=\"container\"><!-- Left Panel: Configuration --><div class=\"panel\" id=\"config-panel\">
</div><!-- Right Panel: Results --><div class=\"panel\" id=\"results-panel\">
</div></div></body></html>
<h2>Middleware Pipeline</h2><p>Configure the pipeline. Order matters for execution.</p><div id=\"middleware-list\">
</div><h3>Initial Context</h3>
<div><label><input type=\"checkbox\" name=\"thinkingMode\" hx-post=\"/process\" hx-target=\"#results-panel\" hx-include=\"[name=&#39;userQuery&#39;], [name=&#39;thinkingMode&#39;]\" hx-indicator=\"#processing-indicator-cb\"
 checked
> Enable Thinking Mode</label> <span id=\"processing-indicator-cb\" class=\"htmx-indicator\">Processing...</span></div><h3>User Query</h3><textarea name=\"userQuery\" rows=\"3\" hx-post=\"/updateQuery\" hx-trigger=\"keyup changed delay:500ms\" hx-target=\"#results-panel\" hx-swap=\"innerHTML\" hx-indicator=\"#query-indicator\">
</textarea> <span id=\"query-indicator\" class=\"htmx-indicator\">Updating...</span> <button hx-post=\"/process\" hx-target=\"#results-panel\" hx-include=\"[name=&#39;userQuery&#39;], [name=&#39;thinkingMode&#39;]\" hx-swap=\"innerHTML\" hx-indicator=\"#processing-indicator-btn\">Process Manually</button> <span id=\"processing-indicator-btn\" class=\"htmx-indicator\">Processing...</span>
<div class=\"middleware-item\"><div class=\"middleware-header\"><span class=\"middleware-name\">
</span> <label class=\"switch\"><input type=\"checkbox\" name=\"enabled\" value=\"
\" hx-post=\"/toggleMiddleware\" hx-target=\"#middleware-list\" hx-swap=\"innerHTML\" hx-vals=\"
\" hx-indicator=\"#toggle-indicator-{ mw.ID }\"
 checked
> <span class=\"slider\"></span></label> <span id=\"
\" class=\"htmx-indicator\">Updating...</span></div><p class=\"middleware-desc\">
</p><!-- TODO: Add up/down buttons for reordering --></div>
<h2>Pipeline Results</h2>
<h3>Final Prompt</h3><pre>
</pre>
<!-- TODO: Add Fragment Visualization Here -->
<h3>LLM Response (Mock)</h3><pre>
</pre>
<h3>Processed Response</h3><pre>
</pre>
<h3>Final Context</h3>
<div class=\"context-viewer\">
<i>No context data.</i>
<div><span class=\"context-key\">
:</span> <span>
</span></div>
</div>